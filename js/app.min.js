(()=>{"use strict";let t=!0;const e=300,i=document.querySelector("body"),n=document.querySelectorAll(".lockPadding");new class{constructor(t){this.type=t}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((t=>{const e=t.dataset.da.trim().split(","),i={};i.element=t,i.parent=t.parentNode,i.destination=document.querySelector(`${e[0].trim()}`),i.breakpoint=e[1]?e[1].trim():"767",i.place=e[2]?e[2].trim():"last",i.index=this.indexInParent(i.parent,i.element),this.оbjects.push(i)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:t})=>`(${this.type}-width: ${t}px),${t}`)).filter(((t,e,i)=>i.indexOf(t)===e)),this.mediaQueries.forEach((t=>{const e=t.split(","),i=window.matchMedia(e[0]),n=e[1],o=this.оbjects.filter((({breakpoint:t})=>t===n));i.addEventListener("change",(()=>{this.mediaHandler(i,o)})),this.mediaHandler(i,o)}))}mediaHandler(t,e){t.matches?e.forEach((t=>{t.index=this.indexInParent(t.parent,t.element),this.moveTo(t.place,t.element,t.destination)})):e.forEach((({parent:t,element:e,index:i})=>{e.classList.contains(this.daClassname)&&this.moveBack(t,e,i)}))}moveTo(t,e,i){e.classList.add(this.daClassname),"last"===t||t>=i.children.length?i.append(e):"first"!==t?i.children[t].before(e):i.prepend(e)}moveBack(t,e,i){e.classList.remove(this.daClassname),void 0!==t.children[i]?t.children[i].before(e):t.append(e)}indexInParent(t,e){return[...t.children].indexOf(e)}arraySort(t){"min"===this.type?t.sort(((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint)):t.sort(((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint))}}("max");const o=new class{constructor(t){this.unlock=!0,this.timeout=t,this.popupLinks=document.querySelectorAll(".popup-link"),this.body=document.querySelector("body"),this.lockPadding=document.querySelectorAll(".lock-padding"),this.popup=document.querySelectorAll(".popup")}init(){this.popupLinks.length>0&&[...this.popupLinks].forEach((t=>{t.addEventListener("click",this.getDataLinks.bind(this))})),this.popup.length>0&&[...this.popup].forEach((t=>{t.addEventListener("click",this.popupClose.bind(this))})),this.popupLinks.length>0&&document.addEventListener("keydown",(t=>{"Escape"===t.code&&document.querySelector(".popup._open")&&(document.querySelector(".popup._open").classList.remove("_open"),this.bodyUnlock())}))}getDataLinks(t){const e=t.target.closest(".popup-link").getAttribute("href").replace("#",""),i=document.querySelector(`#${e}`);this.popupOpen(i)}popupOpen(t){if(t&&this.unlock){const e=document.querySelector(".popup._open");e?this.popupClose(e,!1):this.bodyLock(),t.classList.add("_open")}}popupClose(t,e=!0){const i=t.target;this.unlock&&(i.classList.contains("popup__close")||i.classList.contains("popup__body"))&&(i.closest(".popup").classList.remove("_open"),this.bodyUnlock(),t.preventDefault())}bodyLock(){const t=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";this.lockPadding.length>0&&this.lockPadding.forEach((e=>{e.style.paddingRight=t})),this.body.style.paddingRight=t,this.body.classList.add("lock"),this.unlock=!1,setTimeout((()=>{this.unlock=!0}),this.timeout)}bodyUnlock(){setTimeout((()=>{this.lockPadding.length>0&&this.lockPadding.forEach((t=>{t.style.paddingRight="0px"})),this.body.style.paddingRight="0px",this.body.classList.remove("lock")}),this.timeout),this.unlock=!1,setTimeout((()=>{this.unlock=!0}),this.timeout)}}(800),s=new class{constructor(t){this.animItems=document.querySelectorAll(t)}init(){this.animItems.length>0&&(this.animOnScroll(),window.addEventListener("scroll",this.animOnScroll.bind(this)))}animOnScroll(){this.animItems.forEach((t=>{const e=t.offsetHeight,i=this.offset(t).top;let n=window.innerHeight-e/2;e>window.innerHeight&&(n=window.innerHeight-window.innerHeight/2),scrollY>i-n&&scrollY<i+e?t.classList.add("item-animate"):t.classList.contains("anim-no-hide")||t.classList.remove("item-animate")}))}offset(t){const e=t.getBoundingClientRect(),i=window.scrollX||document.documentElement.scrollLeft,n=window.scrollY||document.documentElement.scrollTop;return{top:e.top+n,left:e.left+i}}}("[data-animation]");class a{constructor(t){this.form=document.querySelector(`#${t}`),this.fields=null,this.btnSubmit=null,this.validationArr=[],this.reg={name:/^[a-zA-Zа-яА-Я]{3,20}$/,city:/^[a-zA-Zа-яА-Я- ]{3,20}$/,email:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,no:/./}}init(){this.fields=this.form.querySelectorAll(".field-form"),this.btnSubmit=this.form.querySelector('input[type="submit"]'),this.btnSubmit.addEventListener("click",this.validationAllField.bind(this)),this.fields.length>0&&this.fields.forEach((t=>{t.querySelector(".field-form__input").addEventListener("blur",this.validationField.bind(this)),t.querySelector(".field-form__input").addEventListener("input",this.validationField.bind(this))}))}validationField(t){const e=t.target.value.trim(),i=t.target.dataset.validation,n=t.target.nextElementSibling;this.reg[i].test(e)?(n.innerHTML="Looks good!",n.classList.remove("incorrect-validation"),n.classList.add("correct-validation"),this.validationArr=this.validationArr.filter((e=>e!==t.target.parentElement))):(n.classList.remove("correct-validation"),n.classList.add("incorrect-validation"),this.validationArr.find((e=>e===t.target.parentElement))||this.validationArr.push(t.target.parentElement),t.target.dataset.error?n.innerHTML=`${t.target.dataset.error}`:n.innerHTML="incorrect")}validationAllField(t){if(this.fields.length>0&&this.fields.forEach((t=>{const e=t.querySelector(".field-form__input"),i=e.value.trim(),n=e.dataset.validation,o=e.nextElementSibling;this.reg[n].test(i)?(o.innerHTML="Looks good!",o.classList.remove("incorrect-validation"),o.classList.add("correct-validation"),this.validationArr=this.validationArr.filter((t=>t!==e.parentElement))):(o.classList.remove("correct-validation"),o.classList.add("incorrect-validation"),this.validationArr.find((t=>t===e.parentElement))||this.validationArr.push(e.parentElement),e.dataset.error?o.innerHTML=`${e.dataset.error}`:o.innerHTML="incorrect")})),0===this.validationArr.length){const t=[];this.fields.forEach((e=>{const i=e.querySelector(".field-form__input"),n={fieldName:i.id,value:i.value};t.push(n),i.value="",i.nextElementSibling.classList.remove("correct-validation")})),this.showResult(t)}t.preventDefault()}showResult(t){const e=document.querySelectorAll(".popup"),i=document.querySelector("#popupResult"),n=i.querySelector(".popup__text");e.forEach((t=>{t.classList.contains("_open")&&t.classList.remove("_open")})),setTimeout((()=>{i.classList.add("_open")}),301),t=t.map((t=>`\n         <p>${t.fieldName}: ${t.value}</p>\n      `)),n.innerHTML=t.join("")}}const l=new a("form-feedback"),r=new a("form-started");var c,d;c=function(t){1==t?document.documentElement.classList.add("webp"):document.documentElement.classList.add("no-webp")},(d=new Image).onload=d.onerror=function(){c(2==d.height)},d.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",(()=>{const o=document.querySelector(".burger-wrapper"),s=document.querySelector("body"),a=l=>{o.removeEventListener("click",a),setTimeout((function(){o.addEventListener("click",a)}),e),s&&(t?function(){const o=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(n.length>0)for(let t=0;t<n.length;t++)n[t].style.paddingRight=o;document.querySelector(".header").style.paddingRight=o,i.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}():(setTimeout((function(){if(n.length>0)for(let t=0;t<n.length;t++)n[t].style.paddingRight="0px";document.querySelector(".header").style.paddingRight="0px",i.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)),s.classList.toggle("_active-burger"),document.body.classList.toggle("lock"))};o&&o.addEventListener("click",a)})(),(()=>{const t=document.querySelector(".burger-menu");t&&t.addEventListener("click",(t=>{t.target.closest(".burger-menu__link")&&document.querySelector("body").classList.toggle("_active-burger")}))})(),o.init(),s.init(),l.init(),r.init()})();